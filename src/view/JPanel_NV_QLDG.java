/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package view;

import dao.DocGiaDAO;
import entities.DocGia;
import java.awt.Color;
import java.util.LinkedList;
import java.util.List;
import javax.swing.JLabel;
import javax.swing.table.DefaultTableModel;
import model.Cache_NV;
import model.Check;
import model.ImgTSX;
import model.Msg;
import model.Util;

/**
 *
 * @author abc
 */
public class JPanel_NV_QLDG extends javax.swing.JPanel
        implements InterfaceForm<DocGia> {

    private static final long serialVersionUID = 1L;

    /**
     * Creates new form JPanel_NV_QLDG
     */
    public JPanel_NV_QLDG() {
        initComponents();
        this.LoadData();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        rdoGioTinh = new javax.swing.ButtonGroup();
        lblAnh = new javax.swing.JLabel();
        txtColsSelected = new javax.swing.JTextField();
        pnlInformation = new javax.swing.JPanel();
        lblDgID = new javax.swing.JLabel();
        lblHoTen = new javax.swing.JLabel();
        lblEmail = new javax.swing.JLabel();
        lblSoDT = new javax.swing.JLabel();
        lblNV = new javax.swing.JLabel();
        lblGioiTinh = new javax.swing.JLabel();
        txtDgID = new javax.swing.JTextField();
        txtHoTen = new javax.swing.JTextField();
        txtEmail = new javax.swing.JTextField();
        txtSoDT = new javax.swing.JTextField();
        txtNvID = new javax.swing.JTextField();
        rdoNam = new javax.swing.JRadioButton();
        rdoNu = new javax.swing.JRadioButton();
        txtSearch = new javax.swing.JTextField();
        pnlThaoTac = new javax.swing.JPanel();
        bntAdd = new javax.swing.JButton();
        bntUppdate = new javax.swing.JButton();
        bntDelete = new javax.swing.JButton();
        bntNew = new javax.swing.JButton();
        bntExport = new javax.swing.JButton();
        bntExit = new javax.swing.JButton();
        splNhanVien = new javax.swing.JScrollPane();
        tblData = new javax.swing.JTable();

        setName("dữ liệu đọc giả"); // NOI18N

        lblAnh.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        lblAnh.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblAnh.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icons/none.png"))); // NOI18N
        lblAnh.setText("none.png");
        lblAnh.setToolTipText("");
        lblAnh.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        lblAnh.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        lblAnh.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        lblAnh.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                lblAnhMouseClicked(evt);
            }
        });

        txtColsSelected.setEditable(false);
        txtColsSelected.setFont(new java.awt.Font("Times New Roman", 0, 12)); // NOI18N
        txtColsSelected.setText("Selected: ");

        pnlInformation.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        lblDgID.setFont(new java.awt.Font("Times New Roman", 1, 16)); // NOI18N
        lblDgID.setText("Mã đọc giả");

        lblHoTen.setFont(new java.awt.Font("Times New Roman", 1, 16)); // NOI18N
        lblHoTen.setText("Họ và Tên");

        lblEmail.setFont(new java.awt.Font("Times New Roman", 1, 16)); // NOI18N
        lblEmail.setText("Email");

        lblSoDT.setFont(new java.awt.Font("Times New Roman", 1, 16)); // NOI18N
        lblSoDT.setText("Số điện thoại");

        lblNV.setFont(new java.awt.Font("Times New Roman", 1, 16)); // NOI18N
        lblNV.setText("Mã nhân viên");

        lblGioiTinh.setFont(new java.awt.Font("Times New Roman", 1, 16)); // NOI18N
        lblGioiTinh.setText("Giới tính");

        txtDgID.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N

        txtHoTen.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N

        txtEmail.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N

        txtSoDT.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N

        txtNvID.setEditable(false);
        txtNvID.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N

        rdoGioTinh.add(rdoNam);
        rdoNam.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N
        rdoNam.setText("Nam");

        rdoGioTinh.add(rdoNu);
        rdoNu.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N
        rdoNu.setText("Nữ");

        javax.swing.GroupLayout pnlInformationLayout = new javax.swing.GroupLayout(pnlInformation);
        pnlInformation.setLayout(pnlInformationLayout);
        pnlInformationLayout.setHorizontalGroup(
            pnlInformationLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlInformationLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(pnlInformationLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pnlInformationLayout.createSequentialGroup()
                        .addGroup(pnlInformationLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblDgID)
                            .addComponent(lblEmail))
                        .addGap(29, 29, 29)
                        .addGroup(pnlInformationLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(txtDgID)
                            .addComponent(txtHoTen)
                            .addComponent(txtEmail)))
                    .addGroup(pnlInformationLayout.createSequentialGroup()
                        .addComponent(lblSoDT)
                        .addGap(18, 18, 18)
                        .addComponent(txtSoDT))
                    .addGroup(pnlInformationLayout.createSequentialGroup()
                        .addGroup(pnlInformationLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblNV)
                            .addComponent(lblGioiTinh)
                            .addComponent(lblHoTen))
                        .addGap(12, 12, 12)
                        .addGroup(pnlInformationLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(pnlInformationLayout.createSequentialGroup()
                                .addComponent(rdoNam)
                                .addGap(18, 18, 18)
                                .addComponent(rdoNu)
                                .addGap(0, 227, Short.MAX_VALUE))
                            .addComponent(txtNvID))))
                .addContainerGap())
        );
        pnlInformationLayout.setVerticalGroup(
            pnlInformationLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlInformationLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(pnlInformationLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblDgID, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtDgID, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(2, 2, 2)
                .addGroup(pnlInformationLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblHoTen, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtHoTen, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(5, 5, 5)
                .addGroup(pnlInformationLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtEmail, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblEmail, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnlInformationLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblSoDT, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtSoDT, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnlInformationLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblNV, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtNvID, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnlInformationLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblGioiTinh, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(rdoNam, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(rdoNu, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pnlInformationLayout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {lblDgID, lblEmail, lblGioiTinh, lblHoTen, lblNV, lblSoDT, rdoNam, rdoNu, txtDgID, txtEmail, txtHoTen, txtNvID, txtSoDT});

        txtSearch.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N
        txtSearch.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtSearchKeyReleased(evt);
            }
        });

        pnlThaoTac.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        pnlThaoTac.setLayout(new java.awt.GridLayout(0, 1));

        bntAdd.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        bntAdd.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icons/insert.png"))); // NOI18N
        bntAdd.setText("Thêm");
        bntAdd.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bntAddActionPerformed(evt);
            }
        });
        pnlThaoTac.add(bntAdd);

        bntUppdate.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        bntUppdate.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icons/update.png"))); // NOI18N
        bntUppdate.setText("Sửa");
        bntUppdate.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bntUppdateActionPerformed(evt);
            }
        });
        pnlThaoTac.add(bntUppdate);

        bntDelete.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        bntDelete.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icons/delete.png"))); // NOI18N
        bntDelete.setText("Xóa");
        bntDelete.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bntDeleteActionPerformed(evt);
            }
        });
        pnlThaoTac.add(bntDelete);

        bntNew.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        bntNew.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icons/new.png"))); // NOI18N
        bntNew.setText("Mới");
        bntNew.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bntNewActionPerformed(evt);
            }
        });
        pnlThaoTac.add(bntNew);

        bntExport.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        bntExport.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icons/export.png"))); // NOI18N
        bntExport.setText("Xuất file");
        bntExport.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bntExportActionPerformed(evt);
            }
        });
        pnlThaoTac.add(bntExport);

        bntExit.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        bntExit.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icons/exit.png"))); // NOI18N
        bntExit.setText("Thoát");
        bntExit.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bntExitActionPerformed(evt);
            }
        });
        pnlThaoTac.add(bntExit);

        splNhanVien.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        splNhanVien.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N
        splNhanVien.setName("NhanVien"); // NOI18N

        tblData.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N
        tblData.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "DgID", "HỌ VÀ TÊN", "ĐỊA CHỈ EMAIL", "SỐ ĐIỆN THOẠI", "GIỚI TÍNH", "NHÂN VIÊN THÊM"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tblData.setToolTipText("Dữ liệu đọc giả");
        tblData.setName("DocGia"); // NOI18N
        tblData.setRowHeight(25);
        tblData.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tblDataMouseClicked(evt);
            }
        });
        tblData.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                tblDataKeyReleased(evt);
            }
        });
        splNhanVien.setViewportView(tblData);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(splNhanVien)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(lblAnh, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(txtColsSelected, javax.swing.GroupLayout.PREFERRED_SIZE, 174, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(pnlInformation, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(txtSearch))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(pnlThaoTac, javax.swing.GroupLayout.PREFERRED_SIZE, 125, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(pnlThaoTac, javax.swing.GroupLayout.PREFERRED_SIZE, 300, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(pnlInformation, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(lblAnh, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(txtSearch, javax.swing.GroupLayout.DEFAULT_SIZE, 25, Short.MAX_VALUE)
                            .addComponent(txtColsSelected, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(splNhanVien, javax.swing.GroupLayout.DEFAULT_SIZE, 122, Short.MAX_VALUE)
                .addContainerGap())
        );

        layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {txtColsSelected, txtSearch});

    }// </editor-fold>//GEN-END:initComponents

    private void lblAnhMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_lblAnhMouseClicked
        img.setFile(Util.Image.ChooserFile(this), lblAnh);
    }//GEN-LAST:event_lblAnhMouseClicked

    private void txtSearchKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtSearchKeyReleased
        @SuppressWarnings("deprecation")
        String sql = this.createSqlFindLike(tblData, txtSearch.getText());
        list = dao.SelectBySqlElement(sql);
        this.fillTalbe();
    }//GEN-LAST:event_txtSearchKeyReleased

    private void bntAddActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bntAddActionPerformed
        this.Insert();
    }//GEN-LAST:event_bntAddActionPerformed

    private void bntUppdateActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bntUppdateActionPerformed
        this.update();
    }//GEN-LAST:event_bntUppdateActionPerformed

    private void bntDeleteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bntDeleteActionPerformed
        this.delete();
    }//GEN-LAST:event_bntDeleteActionPerformed

    private void bntNewActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bntNewActionPerformed
        this.clearForm();
    }//GEN-LAST:event_bntNewActionPerformed

    private void bntExportActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bntExportActionPerformed
        new ShowSelectionExport(null, true, tblData).setVisible(true);
    }//GEN-LAST:event_bntExportActionPerformed

    private void bntExitActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bntExitActionPerformed
        JLabel lbl = JFrame_TrangNV.lblTrangThai;
        this.removeAll();
        this.repaint();
        this.validate();
        this.setVisible(false);
        lbl.setText("Trang chủ");
        lbl.setIcon(Util.Image.getIcon("src/icons/home.gif"));
    }//GEN-LAST:event_bntExitActionPerformed

    private void tblDataMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tblDataMouseClicked
        this.colSelected(tblData, txtColsSelected);
        this.tblClicked();
    }//GEN-LAST:event_tblDataMouseClicked

    private void tblDataKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_tblDataKeyReleased
        this.colSelected(tblData, txtColsSelected);
        int k = evt.getKeyCode();
        if (k == 33 || k == 34 || k == 38 || k == 40) {
            this.tblClicked();
        }
    }//GEN-LAST:event_tblDataKeyReleased


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton bntAdd;
    private javax.swing.JButton bntDelete;
    private javax.swing.JButton bntExit;
    private javax.swing.JButton bntExport;
    private javax.swing.JButton bntNew;
    private javax.swing.JButton bntUppdate;
    private javax.swing.JLabel lblAnh;
    private javax.swing.JLabel lblDgID;
    private javax.swing.JLabel lblEmail;
    private javax.swing.JLabel lblGioiTinh;
    private javax.swing.JLabel lblHoTen;
    private javax.swing.JLabel lblNV;
    private javax.swing.JLabel lblSoDT;
    private javax.swing.JPanel pnlInformation;
    private javax.swing.JPanel pnlThaoTac;
    private javax.swing.ButtonGroup rdoGioTinh;
    private javax.swing.JRadioButton rdoNam;
    private javax.swing.JRadioButton rdoNu;
    private javax.swing.JScrollPane splNhanVien;
    private javax.swing.JTable tblData;
    private javax.swing.JTextField txtColsSelected;
    private javax.swing.JTextField txtDgID;
    private javax.swing.JTextField txtEmail;
    private javax.swing.JTextField txtHoTen;
    private javax.swing.JTextField txtNvID;
    private javax.swing.JTextField txtSearch;
    private javax.swing.JTextField txtSoDT;
    // End of variables declaration//GEN-END:variables
    private List<DocGia> list = new LinkedList<>();
    private final DocGiaDAO dao = new DocGiaDAO();
    private DefaultTableModel model;
    private boolean status = true;
    private final ImgTSX img = new ImgTSX(
            lblAnh, "src/icons/none.png", "images/DocGia/");

    // Tải dữ liệu lần đầu
    private void LoadData() {
        this.tblData.setColumnSelectionAllowed(true);
        this.tblData.setAutoCreateRowSorter(true);
        this.list = dao.SelectAllElement();
        this.fillTalbe();
        this.setStatus();
    }

    @Override // Thêm thông tin nhân viên
    public void Insert() {
        int i = this.findList(this.txtDgID.getText());
        if (i < 0) {
            DocGia data = this.getForm();
            if (validateData(data)) {
                ImgTSX.width = 151;
                ImgTSX.height = 228;
                data.setHinh(img.checkFile() ? (data.getDgID() + ".png") : null);
                if (dao.insert(data)) {
                    list.add(data);
                    this.img.saveUpIcon(data.getDgID());
                    this.fillTalbe();
                    this.alertGroup(this.getName(), InterfaceForm.alertType.insert1);
                    this.clearForm();
                } else {
                    this.alertGroup(this.getName(), InterfaceForm.alertType.insert3);
                }
            }
        } else {
            this.txtDgID.setBackground(Color.red);
            this.alertGroup(this.getName(), InterfaceForm.alertType.insert2);
        }
    }

    @Override // sửa thông tin nhân viên
    public void update() {
        int i = this.findList(this.txtDgID.getText());
        if (i > -1) {
            DocGia data = this.getForm();
            if (validateData(data)) {
                ImgTSX.width = 151;
                ImgTSX.height = 228;
                data.setHinh(img.checkFile() ? (data.getDgID() + ".png") : null);
                if (dao.update(data)) {
                    list.set(i, data);
                    this.img.saveUpIcon(data.getDgID());
                    this.fillTalbe();
                    this.alertGroup(this.getName(), InterfaceForm.alertType.update1);
                    this.clearForm();
                } else {
                    this.alertGroup(this.getName(), InterfaceForm.alertType.update3);
                }
            }
        } else {
            this.txtDgID.setBackground(Color.red);
            this.alertGroup(this.getName(), InterfaceForm.alertType.update2);
        }
    }

    @Override // Xóa thông tin nhân viên
    public void delete() {
        int i = this.findList(this.txtDgID.getText());
        if (i > -1) {
            if (dao.delete(this.txtDgID.getText())) {
                list.remove(i);
                this.img.deleteIcon();
                this.fillTalbe();
                this.alertGroup(this.getName(), InterfaceForm.alertType.delete1);
                this.clearForm();
            } else {
                this.alertGroup(this.getName(), InterfaceForm.alertType.delete3);
            }
        } else {
            this.txtDgID.setBackground(Color.red);
            this.alertGroup(this.getName(), InterfaceForm.alertType.delete2);
        }
        this.clearForm();
    }

    @Override // tìm theo khóa trong danh sách
    public int findList(Object key) {
        String findBy = (String) key;
        for (int i = 0; i < list.size(); i++) {
            if (findBy.equalsIgnoreCase(list.get(i).getDgID())) {
                return i;
            }
        }
        return -1;
    }

    @Override // Lấy thông tin nhân viên trên form
    @SuppressWarnings("deprecation")
    public DocGia getForm() {
        // Lấy thông tin trên form
        DocGia data = new DocGia();
        data.setDgID(Util.ramdomCode(txtDgID.getText(), 10));
        data.setHoTen(txtHoTen.getText());
        data.setEmail(txtEmail.getText());
        data.setSoDT(txtSoDT.getText());
        data.setGioiTinh(rdoNam.isSelected());
        data.setHinh(img.getFile() != null ? img.getFile().getName() : null);
        data.setNvID(Cache_NV.getNvID());
        return data;
    }

    @Override // đỗ dữ liệu lên form
    public void setForm(DocGia data) {
        this.clearBgr();
        // đổ dữ liệu từ form
        this.txtDgID.setText(data.getDgID());
        this.txtHoTen.setText(data.getHoTen());
        this.txtEmail.setText(data.getEmail());
        this.txtSoDT.setText(data.getSoDT());
        this.rdoNam.setSelected(data.isGioiTinh());
        this.rdoNu.setSelected(!data.isGioiTinh());
        this.txtNvID.setText(data.getNvID());
        // thực thể chứa hình ảnh
        ImgTSX.width = 151;
        ImgTSX.height = 228;
        this.img.setFile(data.getHinh(), lblAnh);
    }

    @Override // Xóa trắng form
    public void clearForm() {
        // Phương thức mặc định của interface
        this.clearForm(pnlInformation);
        // Xóa thông tin form
        this.lblAnh.setText("150 x 228");
        this.lblAnh.setIcon(null);
        // Cập nhật trạng thái
        this.status = true;
        this.clearBgr();
        this.setStatus();
    }

    // Trạng thái các fields nhập liệu và nút tương tác
    private void setStatus() {
        txtDgID.setBackground(status ? Color.WHITE : Color.GRAY);
        bntUppdate.setEnabled(!status);
        bntDelete.setEnabled(!status);
        txtDgID.setEditable(status);
        bntAdd.setEnabled(status);
    }

    // Xóa màu nền các fields
    private void clearBgr() {
        txtDgID.setBackground(null);
        txtEmail.setBackground(null);
        txtNvID.setBackground(null);
        txtHoTen.setBackground(null);
        txtSoDT.setBackground(null);
    }

    // @Override // đổ dữ liệu lên bảng
    public void fillTalbe() {
        model = (DefaultTableModel) tblData.getModel();
        model.setRowCount(0);
        if (list != null) {
            list.forEach((x) -> {
                Object[] rows = {x.getDgID(), x.getHoTen(), x.getEmail(),
                    x.getSoDT(), x.isGioiTinh() ? "Nam" : "Nữ", x.getNvID()};
                model.addRow(rows);
            });
        } else {
            System.err.println("check again constructor elementDAO()!");
        }
    }

    // Chọn dữ trên bảng
    private void tblClicked() {
        this.status = false;
        int row = this.tblData.getSelectedRow();
        int col = this.findColumnName(this.tblData, "DgID");
        String value = this.tblData.getValueAt(row, col).toString();
        int i = this.findList(value);
        if (i > -1) {
            // Cập nhật trạng thái
            this.setForm(list.get(i));
            this.setStatus();
        } else {
            System.err.println("index of list is \"-1\"");
        }

    }

    @Override // Kiểm tra dữ liệu
    @SuppressWarnings({"deprecation", "deprecation"})
    public boolean validateData(DocGia data) {
        this.clearBgr();
        // kiểm tra mã đọc giả
        if (!Check.String(data.getDgID(), Check.regex.CODE, "{5,10}")) {
            txtDgID.setBackground(Color.YELLOW);
            Msg.Alert("Mã nhân viên phải là kí tự từ 5-10!",
                    "Lỗi mã nhân viên", Msg.MesType.CanhBao);
            return false;
        }
        // Kiểm tra họ tên
        if (!Check.String(data.getHoTen(), Check.regex.NAME, "")
                && !Check.String(data.getHoTen(), 3, 50)) {
            txtEmail.setBackground(Color.YELLOW);
            Msg.Alert("Họ và tên không được:\n"
                    + "\t-chứa kí tự đặc biệt!\n"
                    + "\t-chứa chứa kí tự số!",
                    "Lỗi họ và tên nhân viên", Msg.MesType.CanhBao);
            return false;
        }
        // kiểm tra email
        if (!Check.String(data.getEmail(), Check.regex.EMAIL, "{1,50}")) {
            txtEmail.setBackground(Color.YELLOW);
            Msg.Alert("Email phải từ 1-50 kí tự!\n"
                    + "Không đúng định dạng email",
                    "Email không đúng định dạng", Msg.MesType.CanhBao);
            return false;
        }
        // kiểm tra số điện thoại
        if (!Check.String(data.getSoDT(), Check.regex.PHONE_NUMBER, "{6,20}")) {
            txtNvID.setBackground(Color.YELLOW);
            Msg.Alert("Số điện thoại chỉ được chứa số\n\tvà trong khoảng 6-20 kí tự!",
                    "Số điện thoại không hợp lệ", Msg.MesType.CanhBao);
            return false;
        }

        // Kiểm tra file
        String alertImg = "Chưa chọn hình ảnh nhân viên!\n"
                + "Xác nhận chọn hình mặc định?";
        if (this.img.getFile() == null) {
            this.img.alertCheck(alertImg, lblAnh);
        } else if (!this.img.getFile().canExecute()
                || this.img.getFile().getName().endsWith("none.png")) {
            this.img.alertCheck(alertImg, lblAnh);
        }
        // Kết quả kiểm tra hoàn thành
        return true;
    }
}
